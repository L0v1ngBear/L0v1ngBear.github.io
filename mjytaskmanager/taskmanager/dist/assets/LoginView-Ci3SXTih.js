import{_ as V,r as c,c as b,a as r,b as o,w as s,d as a,u as k,o as y,e as x,f as L,E as h}from"./index-lnPdyQmo.js";const q={class:"login-container"},B={class:"login-wrapper"},C={__name:"LoginView",setup(E){const l=c({username:"",password:""}),t=c(!1),m={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},i=c(null),f=k(),_=async()=>{i.value&&(t.value=!0,await i.value.validate(async p=>{if(p)try{const e=await L.post("/api/login",l.value);if(e.code="200"){const n=e.data.token;localStorage.setItem("token",n),f.push("/tasks")}else h.error(e.message||"登录失败，请检查用户名和密码")}catch(e){console.error("登录请求出错:",e)}finally{t.value=!1}else return console.log("表单验证失败"),t.value=!1,!1}))};return(p,e)=>{const n=a("el-input"),u=a("el-form-item"),g=a("el-button"),v=a("el-form"),w=a("el-card");return y(),b("div",q,[r("div",B,[o(w,{class:"login-card animated fadeIn"},{default:s(()=>[e[3]||(e[3]=r("div",{class:"logo"},[r("img",{src:"https://via.placeholder.com/100",alt:"Logo",class:"logo-img"})],-1)),e[4]||(e[4]=r("h2",{class:"login-title"},"任务管理系统登录",-1)),o(v,{model:l.value,rules:m,ref_key:"loginFormRef",ref:i,"label-width":"80px"},{default:s(()=>[o(u,{label:"用户名",prop:"username"},{default:s(()=>[o(n,{modelValue:l.value.username,"onUpdate:modelValue":e[0]||(e[0]=d=>l.value.username=d),placeholder:"请输入用户名","prefix-icon":"el-icon-user",class:"input-field"},null,8,["modelValue"])]),_:1}),o(u,{label:"密码",prop:"password"},{default:s(()=>[o(n,{modelValue:l.value.password,"onUpdate:modelValue":e[1]||(e[1]=d=>l.value.password=d),type:"password",placeholder:"请输入密码","prefix-icon":"el-icon-lock",class:"input-field"},null,8,["modelValue"])]),_:1}),o(u,null,{default:s(()=>[o(g,{type:"primary",onClick:_,style:{width:"100%"},loading:t.value,class:"login-button"},{default:s(()=>e[2]||(e[2]=[x(" 登录 ")])),_:1,__:[2]},8,["loading"])]),_:1})]),_:1},8,["model"])]),_:1,__:[3,4]})])])}}},I=V(C,[["__scopeId","data-v-3faf356f"]]);export{I as default};
